 
{
    "Variables": {
    },
   "Containers" :
	[ 
		{
			"Name" : "Credentials",
			"Type" : "AzureCredentials",
			"Attributes": 
			{
				"AuthType": "OrgUserCredentials",
				"Username": "[variables('AzureUsername')]",
				"Password": "[variables('AzurePassword')]"
			}
		},
		//{
		//	"Name" : "Logs Storage Account",
		//	"Type" : "AzureStorageAccount",
		//	"Attributes" : {
		//		"Properties": 
		//		{
		//			"Name" : "[variables('DiagnosticStorageAccountName')]",
		//			"IsClassic" : "false",
		//			"Subscription": "[variables('Subscription')]",
		//			"SubscriptionID": "[variables('SubscriptionID')]",
		//			"TenantID": "[variables('TenantID')]",
		//			"Type" : "Standard_GRS"
		//		},
		//		"ResourceGroup":{
		//			"Name" : "[variables('ResourceGroupNameLog')]",
		//			"Location" : "[variables('ResourceGroupLocation')]"
		//		},
		//		"Containers" : 
		//		[
		//			{
		//				"Name" : "DiagnosticStorageContainerName",
		//				"Permission" : "Container"
		//			}
		//		]
		//	}
			
		//},
		//{
		//	"Name": "Traffic Manager",
		//	"Type": "AzureTrafficManager",
		//	"Attributes": {
		//		"Properties": {
		//			"Name": "[variables('TrafficManagerName')]",
		//			"Subscription": "[variables('Subscription')]",
		//			"SubscriptionID": "[variables('SubscriptionID')]",
		//			"TenantID": "[variables('TenantID')]",
		//			"MonitorPath": "/",
		//			"MonitorPort": "443",
		//			"MonitorProtocol": "HTTPS",
		//			"RelativeDnsName": "[variables('TrafficManagerName')]",
		//			"TrafficRoutingMethod": "Performance",
		//			"__TrafficRoutingMethods": [
		//				"Performance",
		//				"Weighted",
		//				"Priority"
		//			],
		//			"ProfileStatus": "Enabled",
		//			"Ttl": "300"
		//		},
		//		"EndPoints": [
		//			{
		//				"Name": "[variables('TrafficManagerEndpointName1')]",
		//				"Type" : "AzureEndpoints",
		//				"ResourceType": "AzureRmResource",
		//				"ResourceGroupName": "[variables('ResourceGroupName')]",
		//				"Status" : "Enabled"
		//			},
		//			{
		//				"Name": "[variables('TrafficManagerEndpointName2')]",
		//				"Type" : "AzureEndpoints",
		//				"ResourceType": "AzureRmResource",
		//				"ResourceGroupName": "[variables('ResourceGroupName')]",
		//				"Status" : "Enabled"
		//			}
		//		],
		//		"__EndpointTypes": [
		//			"AzureRmPublicIpAddress"
		//		],
		//		"ResourceGroup": {
		//			"Name": "[variables('ResourceGroupName')]",
		//			"Location": "[variables('ResourceGroupLocation')]"
		//		}
		//	}
		//},
        {
			"Name" : "Admin Portal",
			"Type": "AzureWebApp",
			"Attributes": 
			{
				"Properties": 
				{
				  "Name": "[variables('WebAppName')]",
				  "Slot" : "staging",
				  "Subscription": "[variables('Subscription')]",
				  "SubscriptionID": "[variables('SubscriptionID')]",
				  "TenantID": "[variables('TenantID')]",
				  "Use32Bit" : "false",
				  "Location": "[variables('AppServicePlanLocation')]"
				},
        "AppSettings": [
          {
            "Key": "BuildVersion",
            "Value": "[variables('BuildVersion')]"
          },
          //{
          //	"Key": "NewRelic.AppName",
          //	"Value": "[variables('NewRelic.AppName')]"
          //},
          //{
          //	"Key": "NEWRELIC_LICENSEKEY",
          //	"Value": "[variables('NEWRELIC_LICENSEKEY')]"
          //},
          //{
          //	"Key": "NEWRELIC_HOME",
          //	"Value": "[variables('NEWRELIC_HOME')]"

          //},
          //{
          //	"Key": "COR_PROFILER_PATH",
          //	"Value": "[variables('COR_PROFILER_PATH')]"
          //},
          //{
          //	"Key": "COR_PROFILER",
          //	"Value": "[variables('COR_PROFILER')]"
          //},
          //{
          //	"Key": "COR_ENABLE_PROFILING",
          //	"Value": "[variables('COR_ENABLE_PROFILING')]"
          //},
          {
            "Key": "RootConfigurationBlobConnectionString",
            "Value": "[variables('RootConfigurationBlobConnectionString')]"
          },
          {
            "Key": "logging.ats.storage_account",
            "Value": "[variables('logging.ats.storage_account')]"
          },
          {
            "Key": "logging.application_name",
            "Value": "[variables('logging.application_name')]"
          },
          {
            "Key": "GoogleBigQueryHostUrl",
            "Value": "[variables('GoogleBigQueryHostUrl')]"
          },
          {
            "Key": "ida:ClientId",
            "Value": "[variables('ida:ClientId')]"
          },
          {
            "Key": "ida:AADInstance",
            "Value": "[variables('ida:AADInstance')]"
          },
          {
            "Key": "ida:ClientSecret",
            "Value": "[variables('ida:ClientSecret')]"
          },
          {
            "Key": "ida:Domain",
            "Value": "[variables('ida:Domain')]"
          },
          {
            "Key": "ida:TenantId",
            "Value": "[variables('ida:TenantId')]"
          },
          {
            "Key": "ida:TenantId",
            "Value": "[variables('ida:TenantId')]"
          },
          {
            "Key": "LandingPageLayoutRelativePath",
            "Value": "[variables('LandingPageLayoutRelativePath')]"
          },
          {
            "Key": "ResourceToRolesMapRelativePath",
            "Value": "[variables('ResourceToRolesMapRelativePath')]"
          }
        ],
				"ResourceGroup":{
					"Name" : "[variables('ResourceGroupName')]",
					"Location" : "[variables('ResourceGroupLocation')]"
				},
				"AppServicePlan":{
					"Name" : "[variables('AppServicePlan')]",
					"Location": "[variables('AppServicePlanLocation')]",
					"Tier" : "Standard"
				},
				"Diagnostics" : {
					"FailedRequestTracing" : "true",
					"DetailedErrorMessages" : "true",
					 "ApplicationLoggingBlob" : {
						"Enabled" : "true",
						"Level" : "Error",
						"StorageAccount" : {
							"Name": "[variables('DiagnosticStorageAccountName')]",
							"ContainerName" : "[variables('DiagnosticStorageContainerName')]",
							"ResourceGroupName" : "[variables('ResourceGroupNameLog')]"
						}
					},
					 "HTTPLoggingBlob" : {
						"Mode" : "Storage",
						"StorageAccount" : {
							"Name": "[variables('DiagnosticStorageAccountName')]",
							"ContainerName" : "[variables('DiagnosticStorageContainerName')]",
							"ResourceGroupName" : "[variables('ResourceGroupNameLog')]"
						}
					},
					"ApplicationLoggingTable" : {
						"Enabled" : "false",
						"TableSasUrl" : "",
						"Level" : "Verbose"
					}
				}
			}
		}
   ]
}