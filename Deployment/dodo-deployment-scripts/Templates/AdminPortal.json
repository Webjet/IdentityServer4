{
    "Variables": {
    },
   "Containers" :
	[ 
		{
			"Name" : "Credentials",
			"Type" : "AzureCredentials",
			"Attributes": 
			{
				"AuthType": "[variables('AuthType')]",
				"Username": "[variables('AzureUsername')]",
				"Password": "[variables('AzurePassword')]"
			}
		},
    	{
			"Name" : "Admin Portal",
			"Type": "AzureWebApp",
			"Attributes": 
			{
				"Properties": 
				{
				  "Name": "[variables('Environment')]-Admin-Portal-[variables('InstanceNumber')]",				  
				  "Slot" : "staging",
				  "Subscription": "[variables('Subscription')]",
				  "SubscriptionID": "[variables('SubscriptionID')]",
				  "TenantID": "[variables('TenantID')]",
				  "Use32Bit" : "false",
				  "Location": "[variables('AppServicePlanLocation')]",
				  "Configuration" : {
				      "clientAffinityEnabled": false,
					  "use32BitWorkerProcess": false,
					  "phpVersion": "Off"
				  }
				},
				"ResourceGroup":{
					"Name" : "[variables('ResourceGroupName')]",
					"Location" : "[variables('ResourceGroupLocation')]"
				},
				"AppServicePlan":{
					"Name" : "[variables('AppServicePlan')]",
					"Location": "[variables('AppServicePlanLocation')]",
					"Tier" : "Standard"
				},
				"AppSettings": [
					{
						"Key": "NewRelic.AppName",
						"Value": "[variables('Environment')] - AdminPortal"
					},
					{
						"Key": "NEWRELIC_LICENSEKEY",
						"Value": "[variables('NewRelicLicenseKey')]"
					},
					{
						"Key": "NEWRELIC_HOME",
						"Value": "[variables('NewRelicHome')]"						 
					},
					{
						"Key": "COR_PROFILER_PATH",
						"Value": "[variables('COR_PROFILER_PATH')]"
					},
					{
						"Key": "COR_PROFILER",
						"Value": "[variables('COR_PROFILER')]"
					},
					{
						"Key": "COR_ENABLE_PROFILING",
						"Value": "[variables('COR_ENABLE_PROFILING')]"
					},
					{ 
						"Key": "ReleaseVersion", 
						"Value": "[variables('ReleaseVersion')]"
					}
				],
				"Diagnostics" : {
					"FailedRequestTracing" : "true",
					"DetailedErrorMessages" : "true",
					"HTTPLoggingBlob" : {
						"Mode" : "Storage",
						"StorageAccount" : {
							"Name": "[variables('LogStorageName')]",
							"ContainerName" : "[variables('LogStorageContainer')]",
							"ResourceGroupName" : "[variables('LogResourceGroupName')]"
						}
					},
					"ApplicationLoggingBlob" : {
						"Enabled" : "true",
						"Level" : "Error",
						"StorageAccount" : {
							"Name": "[variables('LogStorageName')]",
							"ContainerName" : "[variables('LogStorageContainer')]",
							"ResourceGroupName" : "[variables('LogResourceGroupName')]"
						}
					}
				}
			}
		}
	]
}